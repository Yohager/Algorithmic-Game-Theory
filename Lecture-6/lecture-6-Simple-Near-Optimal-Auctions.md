### Lecture 6
----
### Simple Near-Optimal Auctions

上一个Lecture中我们研究了贝叶斯单参数环境下的期望收益最大化机制设计问题。然而在现实情境下很多时候bidders的估值分布是很复杂的。这一个Lecture针对这个问题展开讨论，寻找近似最优机制，这类机制比理论最优机制设计问题更加简单且更加实用。

6.1节主要介绍近似最优机制设计的目标；6.2节引入最优停止理论，“prophet inequality”；6.3节使用先知不等式设计了一种单物品情境下的简单的可证明的近似最优机制；6.4节阐述了先验独立机制，这个机制的描述不需要参考任何估值分布的信息，此外在这一节中我们还证明了Bulow-Klemperer定理，这个定理解释了为什么竞争比信息有用。

#### 6.1 Optimal Auctions can be Complex

 基于第5讲中的最大虚拟福利最大化机制设计的结论，我们可以写出其分配规则，对于任一种估值组合：
$$
\bold{x}(\bold{v})=\arg \max_X\sum_{i=1}^n\varphi_i(v_i)x_i(\bold{v})
$$
其中
$$
\varphi_i(v_i) = v_i - \frac{1-F_i(v_i)}{f_i(v_i)}
$$
这里我们给出了强假设每一个bidder都服从相同的正则分布，然后实际情况下很有可能不满足这样的条件，而考虑所有的bidder属于非独立同分布的情况，我们会发现追求期望收益最大化的机制求解变得十分复杂。那么我们是否能够找到一个更加简单且实用的形式使得拍卖达到近似最优？

#### 6.2 The Prophet Inequality

考虑一个$n$阶段的游戏，在阶段$i$，你可以获得一个非负的奖励$\pi_i$，这个奖励服从于分布$G_i$. 你提前知道分布$G_1,\cdots,G_n $，并且这些分布相互独立。同时规则规定只有在$i$阶段，$\pi_i$才能兑现。在得知$\pi_i$后你要么选择接受奖励离开，要么放弃继续下一阶段的游戏。这个游戏存在风险的权衡：过早可能会失去未来的一个更好的奖励，过晚则可能拖得太久以至于最后只能接受一个很差的奖励。

**预知不等式**：对于每一个元素都服从独立分布序列$G_1,\cdots,G_n$，存在一个策略能够保证期望收益至少是$\frac{1}{2}\bold{E}_{\pi\sim \bold{G}}[\max_i \pi_i]$. 另外一个这样的阈值策略，当且仅当$\pi_i$至少达到阈值$t$时才能接受奖励$i$.

下面给出证明：

令$z^{+}=\max\{z,0\}$。同时定义$q(t)$为玩家什么奖励都不接受的概率，那么还有$(1-q(t))$的概率玩家会接受超过$t$的奖励，因此这里就存在一个收益下限:$(1-q(t))t$. 当然这个收益的下界显然还存在提升空间。因为如果有一个奖励$\pi_i\geq t$，那么我们就会有额外的收益$\pi_i-t$，如果出现了两个奖励超过了阈值，那么情况就会变得复杂一些，额外的收益要么是$\pi_i-t$要么是$\pi_j-t$。判断依据为谁在前就选谁。当然这里我们做简化处理，我们只考虑一个额外的收益。

下面我们计算t-阈值策略的收益下界：
$$
(1-q(t))t + \sum_{i=1}^n\bold{E}_{\pi}[\pi_i -t|\pi_i>t, \pi_j < t,\forall j\neq i ]P(\pi_i\geq t)P(\pi_j\leq t ,\forall j\neq i)
$$
我们可以发现$\bold{E}_{\pi}[\pi_i -t|\pi_i>t, \pi_j < t,\forall j\neq i ]P(\pi_i\geq t)$可以认为是$\bold{E}[\pi_i-t]^+$，同时由于我们还有$(1-q(t))=P(\pi_j<t,\forall j)\leq P(\pi_j<t , \forall j\neq i)$

因此上式可以写为：
$$
\begin{split}
E_{\pi\sim \bold{G}}[upper]&=(1-q(t))t + \sum_{i=1}^n\bold{E}_{\pi}[\pi_i -t|\pi_i>t, \pi_j < t,\forall j\neq i ]P(\pi_i\geq t)P(\pi_j\leq t ,\forall j\neq i)\\
&\geq (1-q(t))t +q(t) \bold{E}[\pi_i-t]^+
\end{split}
$$
下面我们来分析最理想情况下的期望收益的上界：$\bold{E}_{\pi}[\max_i \pi_i]$
$$
\begin{split}
\bold{E}_{\pi}[\max_i^n\pi_i] &= \bold{E}_{\pi}[t +\max_i^n(\pi_i-t)] \\
 &\leq t+ \bold{E}_{\pi}[\max_i^n(\pi_i -t)^+]\\
 & \leq t + \sum_{i=1}^n\bold{E}_{\pi}[(\pi_i -t)^+]
\end{split}
$$
假设我们设置$q(t)=1/2$时，我们会发现使用t-阈值策略的收益下界大于等于最理想情况下收益的上界的一半，证毕。（注意这个结论理论上可以更加强，因为如果存在多个超过$t$的$\pi$，我们的额外收益还会更高）

#### 6.3 Simple Single-Item Auctions

回到最初的贝叶斯分析下的单物品拍卖，有$n$个bidders，他们的估值服从不同的正则分布$F_1,\cdots,F_n$。下面我们利用先知不等式设计一个比较简单的近似最优拍卖。我们将卖家看作先知不等式游戏中的玩家，第$i$层的奖励看作是竞拍者$i$的虚拟估值的正部$\varphi_i(v_i)^+$，那么$G_i$就是由$F_i$得到的相应的分布。
$$
\bold{E}_{v\sim F}\left[ \sum_{i=1}^n\varphi_i(v_i)x_i(\bold{v}) \right]=\bold{E}_{v\sim F}\left[ \max_{i=1}^n \varphi_i(v_i)^+ \right]
$$
考虑一下的分配规则：

>1. 选择$t$，使得$P(\max_i\varphi_i(v_i)^+\geq t)=\frac{1}{2}$
>
>2. 如果有竞拍者$i$存在$\varphi_i(v_i)^+\geq t$，就将物品分配给$i$号玩家，当存在多个这样的竞拍者时随机分配给任意一个来打破僵局。

不难发现，通过这样的分配规则，我们能够实现近似最优。证明过程依照先知不等式的证明即可给出。
$$
\bold{E}_v\left[ \sum_{i=1}^n \varphi_i(v_i)x_i(\bold{v}) \right] \geq \frac{1}{2} \bold{E}_v\left[ \max_{i=1}^n \varphi_i(v_i)^+ \right]
$$
下面给出一种具体的虚拟阈值分配规则：

> 带竞拍者定向保留价的二价拍卖
>
> 1. 给每一个竞拍者设置一个特定的保留价$r_i=\varphi_i^{-1}(t)$，其中$t$和虚拟阈值分配规则中的$t$定义相同。
> 2. 如果存在一个竞价最高的竞拍者且他的竞拍价格超过保留价，那么就将这个物品分配给这个竞拍者。

对于所有的$n\geq1$和正则分布$F_1,\cdots,F_n$，有合适的保留价的二价拍卖的期望收益至少时最优拍卖的$50\%$.

#### 6.4 Prior-Independent Mechanisms

下面介绍一个由拍卖理论导出的优美结论：最优单物品拍卖的期望收益至多和多一个竞拍者的二价拍卖一样（无保留价）。

**Bulow-Klemperer定理**：假设$F$是正则分布，$n$是正整数。令$\bold{p}$表示有$n+1$个竞拍者的二价拍卖的支付规则，$\bold{p}^*$表示有$n$个竞拍者的最优拍卖（分布为$F$）的支付规则。则：
$$
\bold{E}_{v\sim F^{n+1}}\left[\sum_{i=1}^{n+1}p_i(\bold{v})\right]\geq \bold{E}_{v\sim F^n}\left[\sum_{i=1}^n p_i^*(\bold{v})\right]
$$
通常关于Bulow-Klemperer定理的解释为：更多的竞争比选择合适的拍卖形式更加重要。

再给出一个推论：

当竞拍者的估值独立同分布于一个正则分布时，在所有可以将物品分配出去的DSIC的机制中，二价拍卖的期望收益时最大的。

----

>1. 实际情境下的拍卖，当竞拍者服从不同的正则分布时，拍卖的情景会变得十分复杂。
>2. 先知不等式表明：给定一系列奖励且奖励服从已经的独立分布的情况下，存在一个阈值策略，使得期望收益至少是最大奖励期望值的$50\%$.
>3. 最大化社会福利的机制是先验独立的；最大化虚拟福利的机制不是先验独立的。
>4. Bulow-Klemperer定理表明：最优单物品拍卖的期望收益至多和多一个竞拍者的二价拍卖的期望收益一样。